{
  "_comment": "Code generation mappings for N64 C output. Maps AST Call nodes to C code.",

  "apis": {
    "time.delta": {
      "output": "dt",
      "args": [],
      "flags": {"has_dt": true}
    },

    "gamepad.down": {
      "output": "input_down({button})",
      "args": ["button"],
      "flags": {}
    },
    "gamepad.started": {
      "output": "input_started({button})",
      "args": ["button"],
      "flags": {}
    },
    "gamepad.released": {
      "output": "input_released({button})",
      "args": ["button"],
      "flags": {}
    },

    "transform.rotate": {
      "output": "obj->transform.rot[{axis_index}] += {angle_sign}{arg1}; obj->transform.dirty = 3",
      "args": ["axis", "angle"],
      "flags": {"needs_obj": true},
      "_comment": "Optimized: axis is resolved at compile-time to axis_index (0=X, 1=Y, 2=Z). Only works for cardinal axes."
    },
    "transform.translate": {
      "output": "it_translate(&obj->transform, {x}, {z}, -({y}))",
      "args": ["x", "y", "z"],
      "flags": {"needs_obj": true},
      "_comment": "Coordinate conversion: Blender Z-up to N64 Y-up. Blender (x,y,z) -> N64 (x,z,-y)",
      "variants": {
        "1_arg": "it_translate(&obj->transform, 0.0f, {x}, 0.0f)"
      }
    },
    "transform.move": {
      "output": "it_translate(&obj->transform, {x}, {z}, -({y}))",
      "args": ["x", "y", "z"],
      "flags": {"needs_obj": true},
      "_comment": "Coordinate conversion: Blender Z-up to N64 Y-up"
    },
    "transform.buildmatrix": {
      "output": "obj->transform.dirty = FB_COUNT",
      "args": [],
      "flags": {"needs_obj": true},
      "_comment": "Mark transform as dirty to rebuild matrix on next frame"
    },

    "scene.setactive": {
      "output": "scene_switch_to({scene_id})",
      "args": ["scene"],
      "flags": {},
      "variants": {
        "member_access": "scene_switch_to(tdata->target_scene)"
      }
    }
  }
}
